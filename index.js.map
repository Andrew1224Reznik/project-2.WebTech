{"version":3,"file":"index.js","sources":["../src/js/testimonials.js","../src/index.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  const slidesContainer = document.querySelector('.slides');\n  const slider = document.querySelector('.slider');\n  const texts = document.querySelectorAll('.testimonials-text-all .text');\n  const prevBtn = document.getElementById('prevBtn');\n  const nextBtn = document.getElementById('nextBtn');\n\n  let slideElements = Array.from(document.querySelectorAll('.slide'));\n  const visibleSlides = 3;\n  const originalCount = slideElements.length;\n\n  if (originalCount === 0) return;\n\n  slideElements.forEach((s, i) => (s.dataset.index = i));\n\n  // клонирование\n  for (let i = 0; i < visibleSlides; i++) {\n    const cloneFirst = slideElements[i].cloneNode(true);\n    const cloneLast = slideElements[originalCount - 1 - i].cloneNode(true);\n    slidesContainer.appendChild(cloneFirst);\n    slidesContainer.insertBefore(cloneLast, slidesContainer.firstChild);\n  }\n\n  slideElements = Array.from(document.querySelectorAll('.slide'));\n  let totalSlides = slideElements.length;\n\n  let currentIndex = visibleSlides;\n  let isAnimating = false;\n\n  function getSlideWidth() {\n    return slider.offsetWidth / visibleSlides;\n  }\n\n  function setTransition(on) {\n    slidesContainer.style.transition = on ? 'transform 0.6s ease' : 'none';\n  }\n\n  function highlightCenter() {\n    const centerOffset = Math.floor(visibleSlides / 2);\n    const centerSlideIndex = currentIndex + centerOffset;\n    const centerSlide = slideElements[centerSlideIndex];\n    const centerOriginalIndex = Number(centerSlide.dataset.index);\n\n    // тексты\n    texts.forEach((t, i) =>\n      t.classList.toggle('active', i === centerOriginalIndex)\n    );\n\n    // слайды\n    slideElements.forEach(s => s.classList.remove('center'));\n    if (centerSlide) centerSlide.classList.add('center');\n  }\n\n  function updateSlider() {\n    const w = getSlideWidth();\n    slidesContainer.style.transform = `translateX(-${currentIndex * w}px)`;\n    highlightCenter();\n  }\n\n  function goToSlide(index) {\n    if (isAnimating) return;\n    isAnimating = true;\n    setTransition(true);\n    currentIndex = index;\n    updateSlider();\n  }\n\n  prevBtn.addEventListener('click', () => goToSlide(currentIndex - 1));\n  nextBtn.addEventListener('click', () => goToSlide(currentIndex + 1));\n\n  slidesContainer.addEventListener('transitionend', () => {\n    let jumped = false;\n\n    if (currentIndex < visibleSlides) {\n      setTransition(false);\n      currentIndex += originalCount;\n      slidesContainer.style.transform = `translateX(-${\n        currentIndex * getSlideWidth()\n      }px)`;\n      jumped = true;\n    } else if (currentIndex >= totalSlides - visibleSlides) {\n      setTransition(false);\n      currentIndex -= originalCount;\n      slidesContainer.style.transform = `translateX(-${\n        currentIndex * getSlideWidth()\n      }px)`;\n      jumped = true;\n    }\n\n    // если был прыжок — обновляем центр только после \"телепорта\"\n    if (jumped) {\n      requestAnimationFrame(() => {\n        highlightCenter();\n      });\n    }\n\n    isAnimating = false;\n    setTimeout(() => setTransition(true), 20);\n  });\n\n  window.addEventListener('resize', () => {\n    setTransition(false);\n    updateSlider();\n    setTimeout(() => setTransition(true), 20);\n  });\n\n  // старт\n  setTransition(false);\n  updateSlider();\n  setTimeout(() => setTransition(true), 20);\n});\n","import AOS from 'aos';\nimport 'aos/dist/aos.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  AOS.init({\n    duration: 1200,\n    once: true,\n  });\n});\n\nimport './js/testimonials.js';\n"],"names":["slidesContainer","slider","texts","prevBtn","nextBtn","slideElements","visibleSlides","originalCount","s","i","cloneFirst","cloneLast","totalSlides","currentIndex","isAnimating","getSlideWidth","setTransition","on","highlightCenter","centerOffset","centerSlideIndex","centerSlide","centerOriginalIndex","t","updateSlider","w","goToSlide","index","jumped","AOS"],"mappings":"svBAAA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAkB,SAAS,cAAc,SAAS,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAQ,SAAS,iBAAiB,8BAA8B,EAChEC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAU,SAAS,eAAe,SAAS,EAEjD,IAAIC,EAAgB,MAAM,KAAK,SAAS,iBAAiB,QAAQ,CAAC,EAClE,MAAMC,EAAgB,EAChBC,EAAgBF,EAAc,OAEpC,GAAIE,IAAkB,EAAG,OAEzBF,EAAc,QAAQ,CAACG,EAAGC,IAAOD,EAAE,QAAQ,MAAQC,CAAE,EAGrD,QAASA,EAAI,EAAGA,EAAIH,EAAeG,IAAK,CACtC,MAAMC,EAAaL,EAAcI,CAAC,EAAE,UAAU,EAAI,EAC5CE,EAAYN,EAAcE,EAAgB,EAAIE,CAAC,EAAE,UAAU,EAAI,EACrET,EAAgB,YAAYU,CAAU,EACtCV,EAAgB,aAAaW,EAAWX,EAAgB,UAAU,CACnE,CAEDK,EAAgB,MAAM,KAAK,SAAS,iBAAiB,QAAQ,CAAC,EAC9D,IAAIO,EAAcP,EAAc,OAE5BQ,EAAeP,EACfQ,EAAc,GAElB,SAASC,GAAgB,CACvB,OAAOd,EAAO,YAAcK,CAC7B,CAED,SAASU,EAAcC,EAAI,CACzBjB,EAAgB,MAAM,WAAaiB,EAAK,sBAAwB,MACjE,CAED,SAASC,GAAkB,CACzB,MAAMC,EAAe,KAAK,MAAMb,EAAgB,CAAC,EAC3Cc,EAAmBP,EAAeM,EAClCE,EAAchB,EAAce,CAAgB,EAC5CE,EAAsB,OAAOD,EAAY,QAAQ,KAAK,EAG5DnB,EAAM,QAAQ,CAACqB,EAAGd,IAChBc,EAAE,UAAU,OAAO,SAAUd,IAAMa,CAAmB,CAC5D,EAGIjB,EAAc,QAAQG,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EACnDa,GAAaA,EAAY,UAAU,IAAI,QAAQ,CACpD,CAED,SAASG,GAAe,CACtB,MAAMC,EAAIV,IACVf,EAAgB,MAAM,UAAY,eAAea,EAAeY,CAAC,MACjEP,GACD,CAED,SAASQ,EAAUC,EAAO,CACpBb,IACJA,EAAc,GACdE,EAAc,EAAI,EAClBH,EAAec,EACfH,IACD,CAEDrB,EAAQ,iBAAiB,QAAS,IAAMuB,EAAUb,EAAe,CAAC,CAAC,EACnET,EAAQ,iBAAiB,QAAS,IAAMsB,EAAUb,EAAe,CAAC,CAAC,EAEnEb,EAAgB,iBAAiB,gBAAiB,IAAM,CACtD,IAAI4B,EAAS,GAETf,EAAeP,GACjBU,EAAc,EAAK,EACnBH,GAAgBN,EAChBP,EAAgB,MAAM,UAAY,eAChCa,EAAeE,EAAe,CAC/B,MACDa,EAAS,IACAf,GAAgBD,EAAcN,IACvCU,EAAc,EAAK,EACnBH,GAAgBN,EAChBP,EAAgB,MAAM,UAAY,eAChCa,EAAeE,EAAe,CAC/B,MACDa,EAAS,IAIPA,GACF,sBAAsB,IAAM,CAC1BV,GACR,CAAO,EAGHJ,EAAc,GACd,WAAW,IAAME,EAAc,EAAI,EAAG,EAAE,CAC5C,CAAG,EAED,OAAO,iBAAiB,SAAU,IAAM,CACtCA,EAAc,EAAK,EACnBQ,IACA,WAAW,IAAMR,EAAc,EAAI,EAAG,EAAE,CAC5C,CAAG,EAGDA,EAAc,EAAK,EACnBQ,IACA,WAAW,IAAMR,EAAc,EAAI,EAAG,EAAE,CAC1C,CAAC,EC3GD,SAAS,iBAAiB,mBAAoB,IAAM,CAClDa,EAAI,KAAK,CACP,SAAU,KACV,KAAM,EACV,CAAG,CACH,CAAC"}